<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TidakMungkin — Proof</title>
    <style>
      :root { color-scheme: dark; }
      body {
        margin: 0;
        font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
        background: radial-gradient(1200px 600px at 20% 10%, rgba(0, 255, 198, 0.10), transparent 60%),
                    radial-gradient(1200px 600px at 80% 20%, rgba(140, 82, 255, 0.10), transparent 60%),
                    #07070a;
        color: #eaeaf0;
      }
      .wrap { max-width: 980px; margin: 0 auto; padding: 56px 20px; }
      @media (max-width: 520px){ .wrap{ padding: 44px 18px; } }
      .topline { display:flex; justify-content: space-between; align-items:center; gap: 12px; flex-wrap: wrap; }
      .badge { display:inline-flex; gap:10px; align-items:center; font-size: 12px; padding: 8px 12px; border-radius: 999px; border: 1px solid rgba(255,255,255,.14); background: rgba(255,255,255,.04); 
        flex-wrap: wrap;
        max-width: 100%;
      }
      .pill{ display:inline-flex; align-items:center; gap:6px; padding:2px 8px; border-radius:999px; border:1px solid rgba(255,255,255,.14); background: rgba(255,255,255,.04); font-size:11px; color:#b9b9c6; }
      .pill.pending{ color:#ffcc66; }
      .dot { width:8px; height:8px; border-radius:999px; background:#00ffc6; box-shadow: 0 0 12px rgba(0,255,198,.6); }
      h1 { font-size: 54px; margin: 18px 0 12px; letter-spacing: -0.02em;  line-height: 0.98; overflow-wrap:anywhere; word-break: break-word; padding-right: 2px; }
      .sub { color:#b9b9c6; max-width: 72ch; line-height: 1.55; }
      .grid { display:grid; grid-template-columns: 1fr; gap: 14px; margin-top: 22px; }
      .card { border:1px solid rgba(255,255,255,.12); background: rgba(255,255,255,.03); border-radius:16px; padding:16px; }
      .k { color:#b9b9c6; font-size: 12px; text-transform: uppercase; letter-spacing: .08em; }
      .v { font-weight: 800; font-variant-numeric: tabular-nums; margin-top: 8px; }
      .links a { color:#7ee8ff; text-decoration:none; margin-right: 14px; }
      .linksRow{ display:flex; flex-wrap:wrap; gap:10px 14px; align-items:center; }
      .linksList{ list-style:none; padding:0; margin:0; display:flex; flex-wrap:wrap; gap:10px 14px; align-items:center; }
      .linksList .linkItem{ display:inline-flex; align-items:center; gap:8px; }
      @media (max-width: 520px){
        .linksList{ flex-direction:column; align-items:stretch; gap:10px; }
        .linksList .linkItem{ width:100%; justify-content:space-between; }
        .linksList a{ margin-right:0; }
      }
      .linkItem{ display:inline-flex; align-items:center; gap:8px; }
      .links a:hover { text-decoration: underline; }
      .btn{ cursor:pointer; border:1px solid rgba(255,255,255,.14); background: rgba(255,255,255,.04); color:#eaeaf0; padding:10px 12px; border-radius:12px; font-weight:800; font-size:12px; }
      .btn:hover{ background: rgba(255,255,255,.07); border-color: rgba(255,255,255,.22); }
      .btn:active{ transform: translateY(1px); }
        body{ padding-bottom: 84px; }
      }
      .pending { color:#ffcc66; }
      .ok { color:#00ffc6; }
      .proof a { color:#c7a6ff; text-decoration:none; }
      .proof a:hover { text-decoration: underline; }
      .glitch { position: relative; display: inline-block; }
      .glitch::before, .glitch::after {
        content: attr(data-text);
        position: absolute;
        left: 0; top: 0;
        opacity: .55;
        clip-path: inset(0 0 0 0);
      }
      .glitch::before { transform: translate(1px, -1px); color: #00ffc6; }
      .glitch::after { transform: translate(-1px, 1px); color: #8c52ff; }
      @media (min-width: 720px){ .grid{ grid-template-columns: 1fr 1fr; } }
      @media (max-width: 520px){
        .topline{ gap: 16px; }
        .badge{ width: 100%; justify-content: flex-start; }
        h1{ font-size: 42px; }
        #lastUpdate{ font-size: 11px; }
      }
      @media (max-width: 420px){
        h1{ font-size: 44px; }
      }

      .card{ transition: transform .18s ease, border-color .18s ease, background .18s ease; }
      .card:hover{ transform: translateY(-1px); border-color: rgba(255,255,255,.18); background: rgba(255,255,255,.04); }
      .badge{ transition: transform .18s ease; }
      .badge:hover{ transform: translateY(-1px); }
      @keyframes floaty{ 0%{ transform: translateY(0px);} 50%{ transform: translateY(-4px);} 100%{ transform: translateY(0px);} }
      .dot{ animation: floaty 3.2s ease-in-out infinite; }

      /* scroll reveal */
      .reveal{ opacity:0; transform: translateY(10px); }
      .reveal.in{ opacity:1; transform: translateY(0); transition: opacity .45s ease, transform .45s ease; }

      /* subtle bg shimmer */
      @keyframes bgshift{ 0%{ background-position: 0% 0%, 100% 0%; } 100%{ background-position: 100% 10%, 0% 20%; } }
      body{ background-size: 200% 200%, 200% 200%, auto; animation: bgshift 14s linear infinite; }

      /* feedback pulse */
      @keyframes pulse{ 0%{ box-shadow: 0 0 0 rgba(0,255,198,0);} 40%{ box-shadow: 0 0 22px rgba(0,255,198,.25);} 100%{ box-shadow: 0 0 0 rgba(0,255,198,0);} }
      .btn.pulse{ animation: pulse .55s ease; }
      .toastGlobal{ position:fixed; left:50%; bottom:20px; transform:translateX(-50%);
        padding:10px 12px; border-radius:12px; border:1px solid rgba(255,255,255,.14);
        background: rgba(7,7,10,.82); backdrop-filter: blur(10px);
        color:#eaeaf0; font-weight:800; font-size:12px; z-index:60;
        box-shadow: 0 12px 40px rgba(0,0,0,.35);
        max-width: calc(100vw - 24px);
      }
</style>
  </head>
  <body>
    <div class="wrap">
      <div class="topline">
        <div class="badge"><span class="dot"></span><span>@TidakMungkinAI</span><span id="lastUpdate" class="k" style="text-transform:none;letter-spacing:0;">—</span></div>
        <div class="badge">DoD: <span class="ok">verified deployed</span></div>
      </div>

      <h1 style="font-size:40px;margin-top:18px;">Proof</h1>
      <p class="sub">Public-safe telemetry + receipts. If something looks off, check raw JSON.</p>
      <div class="card links reveal" style="margin-top:14px;">
        <a class="btn" href="./">← Back</a>
        <a class="btn" href="./status.json" target="_blank" rel="noopener noreferrer" style="margin-left:8px;">Open status.json</a>
        <a class="btn" href="./agents.json" target="_blank" rel="noopener noreferrer" style="margin-left:8px;">Open agents.json</a>
      </div>
<h2 style="margin:26px 0 10px;">Current Status</h2>
      <div class="grid">
        <div class="card reveal"><div class="k">Health</div><div id="health" class="v">PENDING</div><div id="healthDetail" class="k" style="margin-top:8px;text-transform:none;">—</div></div>
        <div class="card reveal"><div class="k">Solana Wallet</div><div id="wallet" class="v">PENDING</div><div id="walletAddr" class="k" style="margin-top:8px;text-transform:none;">—</div></div>
        <div class="card reveal"><div class="k">Agents</div><div id="agents" class="v">PENDING</div><div id="agentsList" class="k" style="margin-top:8px;text-transform:none;">counted from repo (agents.json)</div></div>
        <div class="card reveal"><div class="k">Platform</div><div id="platform" class="v">Clawdbot</div><div class="k" style="margin-top:8px;text-transform:none;">automation + orchestration</div></div>
        <div class="card"><div class="k">Constraints</div>
          <div class="v" style="font-size:14px;font-weight:600;line-height:1.5;">
            No backend auth. Public data + source code. Sensitive actions require approval.
          </div>
        </div>
      </div>

      <div class="card proof reveal" style="margin-top:18px;">
        <div class="k" style="margin-bottom:8px;">Proof / data sources</div>
        <div style="line-height:1.7;">
          <div>• <a href="./agents.json" target="_blank" rel="noopener noreferrer">agents.json</a> — list of active agents (repo-backed)</div>
          <div>• <a href="./status.json" target="_blank" rel="noopener noreferrer">status.json</a> — computed health + wallet snapshot (generated)</div>
          <div>• <a href="./finance.subscriptions.public.json" target="_blank" rel="noopener noreferrer">finance.subscriptions.public.json</a> — baseline list (public-safe)</div>
        </div>
      </div>

      <script>
        async function fetchJson(path) {
          const res = await fetch(path, { cache: 'no-store' });
          if (!res.ok) throw new Error(path + ' not found');
          return res.json();
        }
        function maskAddress(addr){
          if (!addr || typeof addr !== 'string') return '—';
          if (addr.length <= 10) return addr;
          return addr.slice(0,4) + '…' + addr.slice(-4);
        }

        function formatUpdatedAt(iso){
          try {
            const d = new Date(iso);
            const fmt = new Intl.DateTimeFormat('en-GB', {
              timeZone: 'Asia/Jakarta',
              year: 'numeric', month: 'short', day: '2-digit',
              hour: '2-digit', minute: '2-digit'
            });
            return fmt.format(d) + ' WIB';
          } catch { return iso; }
        }

        async function main() {
          try {
            const [agents, status] = await Promise.all([
              fetchJson('./agents.json'),
              fetchJson('./status.json')
            ]);

            const raw = Array.isArray(agents?.agents) ? agents.agents : []
            const list = raw.map((x) => {
              if (typeof x === 'string') {
                const parts = x.split(' — ');
                return { name: parts[0] || x, role: parts[1] };
              }
              return x;
            }).filter(Boolean)
            document.getElementById('agents').textContent = `${list.length} active`
            const names = list.slice(0, 6).map(a => a.role ? `${a.name} (${a.role})` : a.name).join(' · ')
            if (names) document.getElementById('agentsList').textContent = names


            const addr = status?.wallet_address || '';
            if (addr) {
              document.getElementById('walletAddr').textContent = maskAddress(addr);
              document.getElementById('walletAddr').setAttribute('data-full', addr);
              const sol = status?.wallet_sol;
              if (typeof sol === 'number') {
                document.getElementById('wallet').textContent = `${sol.toFixed(4)} SOL`;
              } else {
                document.getElementById('wallet').textContent = 'PENDING';
              }
            }

            const updated = status?.updated_at;
            if (updated) document.getElementById('lastUpdate').textContent = 'updated: ' + formatUpdatedAt(updated);

            const gatewayOk = status?.gateway_ok;
            const agentsConfigured = status?.agents_count_configured;
            const lastSync = status?.last_sync_agents_at;
            if (typeof gatewayOk === 'boolean') {
              document.getElementById('health').textContent = gatewayOk ? 'OK' : 'DEGRADED';
              const parts = [];
              if (typeof agentsConfigured === 'number') parts.push(
                'agents: ' + agentsConfigured
              );
              if (lastSync) parts.push('sync: ' + lastSync);
              if (parts.length) document.getElementById('healthDetail').textContent = parts.join(' · ');
            }
          } catch (e) {
            // keep PENDING
          }
        }

        main();

        // share helpers
        const toast = (txt) => {
          const el = document.getElementById('toastGlobal') || document.getElementById('copyToast');
          if (!el) return;
          el.textContent = txt;
          el.style.display = 'block';
          el.style.opacity = '1';
          setTimeout(() => { el.style.opacity = '0'; }, 1200);
          setTimeout(() => { el.style.display = 'none'; el.style.opacity='1'; }, 1550);
        };
        const copy = async (txt) => {
          try { await navigator.clipboard.writeText(txt); toast('Copied.'); }
          catch { toast('Copy failed.'); }
        };
        const pitch = (document.getElementById('pitch') && document.getElementById('pitch').textContent) ? document.getElementById('pitch').textContent : '';

        // Robust clipboard fallback (iOS/Safari sometimes rejects clipboard API)
        const copyFallback = (txt) => {
          try {
            const ta = document.createElement('textarea');
            ta.value = txt;
            ta.setAttribute('readonly', '');
            ta.style.position = 'fixed';
            ta.style.left = '-9999px';
            document.body.appendChild(ta);
            ta.select();
            document.execCommand('copy');
            document.body.removeChild(ta);
            toast('Copied.');
          } catch {
            toast('Copy failed.');
          }
        };
        const copySafe = async (txt) => {
          try { await navigator.clipboard.writeText(txt); toast('Copied.'); }
          catch { copyFallback(txt); }
        };

        const btnTweet = document.getElementById('copyTweet');
        const btnBadge = document.getElementById('copyBadge');
        const btnProof = document.getElementById('openProof');

        const baseUrl = location.href.replace(/\/$/, '');
        const tweet = `Ship tasks to DoD: verified deployed — with receipts.\n${baseUrl}\nProof: ${baseUrl}/status.json`;
        const badgeUrl = 'https://img.shields.io/badge/DoD-verified_deployed-00ffc6?style=for-the-badge';
        const badgeMd = `[![DoD: verified deployed](${badgeUrl})](${baseUrl})`;

        const openProof = () => {
          // Prefer same-tab navigation on mobile (popup blockers)
          try { location.href = './status.json'; } catch {}
        };

        if (btnTweet) btnTweet.addEventListener('click', () => { btnTweet.classList.add('pulse'); setTimeout(()=>btnTweet.classList.remove('pulse'), 600); copySafe(tweet); });
        if (btnBadge) btnBadge.addEventListener('click', () => { btnBadge.classList.add('pulse'); setTimeout(()=>btnBadge.classList.remove('pulse'), 600); copySafe(badgeMd); });
        if (btnProof) btnProof.addEventListener('click', () => openProof());

        async function loadChangelog(){
          try {
            const res = await fetch('https://api.github.com/repos/tidakmungkinai/tidakmungkinai.github.io/commits?per_page=6', { cache:'no-store' });
            if (!res.ok) throw new Error('gh');
            const commits = await res.json();
            const lines = commits.slice(0,5).map((c) => {
              const msg = String((c && c.commit && c.commit.message) ? c.commit.message : '').split('\n')[0].trim();
              const sha = String(c && c.sha ? c.sha : '').slice(0,7);
              return '• ' + msg + ' (' + sha + ')';
            }).join('\n');
            const el = document.getElementById('changelog');
            if (el) el.textContent = lines || '—';
          } catch {
            const el = document.getElementById('changelog');
            if (el) el.textContent = '—';
          }
        }
        loadChangelog();

        // Scroll reveal
        const els = Array.from(document.querySelectorAll('.reveal'));
        const io = new IntersectionObserver((entries) => {
          for (const e of entries) {
            if (e.isIntersecting) {
              e.target.classList.add('in');
              io.unobserve(e.target);
            }
          }
        }, { threshold: 0.08 });
        els.forEach(el => io.observe(el));

      </script>
  
            <div id="toastGlobal" class="toastGlobal" style="display:none;">Copied.</div>
  </body>
</html>
